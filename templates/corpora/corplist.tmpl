#*
Copyright (c) 2014 Institute of the Czech National Corpus

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; version 2
dated June, 1991.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
*#

#encoding UTF-8
#from translation import ugettext as _
#from cmpltmpl.document import document
#from templating.filters import *
#extends document

#def title
#end def

#def bodyonload
require(['${client_model_dir}/${page_model}', 'conf'], function (pageSelf, conf) {
    var keywords = #filter $Jsonize#$keywords#end filter#,
        keywordLabels = #filter $Jsonize#$keywords_labels#end filter#;
    pageSelf.init(conf, keywords, keywordLabels);
});
#end def


#block main
<section class="corplist">
    <h2>$_('Available corpora')</h2>

    <form class="filter" action="corplist">


    </form>

    <table class="data corplist" border="0">
        <tr>
            <th>$_('Name')</th>
            <th>$_('Size (in positions)')</th>
            <th>$_('Labels')</th>
            <th>$_('In favorites')</th>
            <th>$_('Actions')</th>
        </tr>
        #for $row in $corplist
        <tr>
            <td class="corpname"><a href="first_form?corpname=$row.name">$row.name</a></td>
            <td class="num">$row.size</td>
            <td>
            #for $keyword, $k_label in $row.metadata.keywords.items()
            <a class="keyword" href="corplist?keyword=$keyword">$k_label</a>
            #end for
            </td>
            <td>
                <input class="set-favorite" type="checkbox" value="$row.id" #if $row.id in $favorite_corpora#checked="checked"#end if# />
            </td>
            <td>
                <p class="desc" style="display: none">
                <strong>${row.name}:</strong><br />
                $row.desc
                </p>
                <a class="detail">$_('description')</a> |
                <a href="first_form?corpname=$row.id">$_('use now')</a>
            </td>
        </tr>
        #end for
    </table>

</section>
#end block